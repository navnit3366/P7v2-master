(()=>{"use strict";var e={569:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(645),r=n.n(i),o=n(667),a=n.n(o),d=n(967),c=r()((function(e){return e[1]})),s=a()(d.Z);c.push([e.id,"*{box-sizing:border-box}@font-face{font-family:fb-krungthep;src:url("+s+') format("truetype")}html{height:100vh;width:100vw;z-index:1}body{position:fixed;top:0px;left:0px;z-index:10;height:100%;width:100%;font-family:krungthep,fb-krungthep;font-size:16px;color:#fff;overflow:hidden;margin:0px}a{color:#fff;text-decoration:none}.my_container{display:grid;grid-template-columns:20% 80%;grid-template-rows:1fr 250px;grid-template-areas:"a b" "c b";height:100%;width:100%}@media(max-width: 970px){.my_container{grid-template-columns:100%;grid-template-rows:55px calc(100% - 55px);grid-template-areas:"a" "b"}}header{grid-area:a;height:100%;width:100%;background-color:#1d1f26}#brand{font-size:20px;text-align:center;margin:15px 0px}footer{grid-area:c;height:100%;width:100%;text-align:center;font-size:12px;background-color:#1d1f26;padding:0 15px;padding-top:165px}@media(max-width: 1192px){footer{padding-top:150px}}@media(max-width: 849px){footer{padding-top:135px}}@media(max-width: 970px){footer{display:none}}#footer_text{margin-bottom:8px}#chat_window{grid-area:b;height:100%;width:100%;background-color:#1c2e40;padding:7px 15px}@media(max-width: 970px){#chat_window{padding:0}}#dialogue_container{height:100%;width:100%}#dialogue_area{height:calc(100% - var(--input_container_height));width:100%;overflow:auto;background-color:#1d1f26;padding:0px 22px;border-top:10px solid #1d1f26;border-radius:10px 10px 0px 0px}@media(max-width: 970px){#dialogue_area{padding:0px 25px;border-radius:0}}:root{--input_container_height: 60px;--input_area_width: 82%}@media(max-width: 970px){:root{--input_container_height: 50px;--input_area_width: 75%}}#input_container{display:flex;height:var(--input_container_height);width:100%}#input_area{resize:none;border:none;margin:0;flex-basis:var(--input_area_width);font-size:16px;font-family:Verdana;color:#fff;background-color:#1d212a;padding:20px 30px;border-radius:0px 0px 0px 10px;transition:border,box-shadow 1500ms ease-out}@media(max-width: 970px){#input_area{padding:15px 25px;border-radius:0}}#input_area:focus{outline:none;border:1px solid #51cbee;box-shadow:0px 0 5px #51cbee}#submit_button{--webkit-appearance: none;border:none;margin:0;padding:0;display:flex;flex-basis:calc(100% - var(--input_area_width));color:#fff;background-color:#182736;border-radius:0px 0px 10px 0px}#submit_button:focus{outline:none}@media(max-width: 970px){#submit_button{border-radius:0}}@media(pointer: fine){#submit_button:hover{color:#182736;background-color:#fff}}#envelope{font-size:25px;margin:auto}.message_container{width:max-content;max-width:75%;margin:10px 0}@media(max-width: 1350px){.message_container{max-width:85%}}@media(max-width: 1050px){.message_container{max-width:90%}}@media(max-width: 800px){.message_container{max-width:100%}}.message_container.grandpy_type{margin-right:auto}.message_container.user_type{margin-left:auto}.message{text-align:justify;overflow-wrap:break-word;background-color:#1c2e40;padding:15px 25px}.message a{text-decoration:underline}.user{font-family:Verdana;border-radius:20px 20px 0px 20px}.user+.profile_icon{text-align:right;margin:0 -10px 0 0}.grandpy{border-radius:20px 20px 20px 0px}.grandpy+.profile_icon{text-align:left;margin:0 0 0 -10px}.loading{color:#fff;margin:10px 0}.map{height:40vh;width:100vw;max-width:calc(100% + 2*30px);margin:-15px -25px;border-radius:10px 10px 10px 0}@media(max-width: 970px){.map{height:50vh}}@keyframes ld-spin{0%{transform:rotate(0);animation-timing-function:cubic-bezier(0.55, 0.055, 0.675, 0.19)}50%{transform:rotate(180deg);animation-timing-function:cubic-bezier(0.215, 0.61, 0.355, 1)}100%{transform:rotate(360deg)}}.ld.ld-spin{animation:ld-spin 1s infinite}.ld-square{width:16px;height:16px;position:relative}.ld-square:after{position:absolute;top:0;left:0;width:100%;height:100%;content:" ";background:center center no-repeat currentColor}',""]);const u=c},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);i&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},967:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"9545f0ceefb78a42f2a06f89db13e243.ttf"},379:(e,t,n)=>{var i,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function d(e,t){for(var n={},i=[],r=0;r<e.length;r++){var d=e[r],c=t.base?d[0]+t.base:d[0],s=n[c]||0,u="".concat(c," ").concat(s);n[c]=s+1;var p=a(u),l={css:d[1],media:d[2],sourceMap:d[3]};-1!==p?(o[p].references++,o[p].updater(l)):o.push({identifier:u,updater:m(l,t),references:1}),i.push(u)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=r(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var s,u=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join("\n")});function p(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function l(e,t,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,g=0;function m(e,t){var n,i,r;if(t.singleton){var o=g++;n=f||(f=c(t)),i=p.bind(null,n,o,!1),r=p.bind(null,n,o,!0)}else n=c(t),i=l.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=d(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=a(n[i]);o[r].references--}for(var c=d(e,t),s=0;s<n.length;s++){var u=a(n[s]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=c}}}}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{const e=function(e,t,n,i){const r=new XMLHttpRequest;r.open(e,t),r.addEventListener("load",(()=>{try{i(r.responseText)}catch(e){console.error(e)}})),r.addEventListener("error",(e=>{console.error("Erreur: "+e)})),r.send(n)};async function t(e,{username:t,icon:n},{custom_class:r="",animationDuration:o=1}={}){window.MESSAGE_ID+=1;const a=window.MESSAGE_ID,d=document.querySelector.bind(document),c=`\n        <div class='message_container ${t}_type ${r}'>            <div class="${t} message" id="message${a}">                ${"grandpy"===t?e:""}            </div>            <div class='profile_icon'>${n}</div>        </div>\n    `;return"grandpy"===t?(d("#dialogue_area").insertAdjacentHTML("beforeend",`<div class="loading ld ld-square ld-spin" id="animation${a}"></div>`),i(),await new Promise((e=>{setTimeout((()=>{d("#animation"+a).outerHTML=c,e()}),1e3*o)}))):(d("#dialogue_area").insertAdjacentHTML("beforeend",c),d("#message"+a).innerText=e),i(),Promise.resolve(a)}function i(){document.querySelector.bind(document)("#dialogue_area").lastElementChild.scrollIntoView(!0)}function r(){const e=["ðŸ‘©","ðŸ‘¤","ðŸ‘¨","ðŸ¥µ","ðŸ¥¶","ðŸ¤‘"];return e[Math.floor(Math.random()*e.length)]}function o(){const e=document.querySelector.bind(document),t=e("body").clientWidth<=970,n=t?120:220,r=t?50:60,o=e("#input_area").scrollHeight>n?n:e("#input_area").scrollHeight,a=parseInt(getComputedStyle(e("#input_container")).height,10);o>=n&&""!=e("#input_area").value&&a>=r+5||(e("#input_container").style.height=""!=e("#input_area").value?o+"px":"var(--input_container_height)",e("#dialogue_area").style.height=`calc(100% - ${e("#input_container").style.height})`,e("#dialogue_area").lastElementChild&&i())}function a(){const e=document.querySelector.bind(document),t=window.innerHeight>window.innerWidth?this.innerHeight+"px":e("html").clientHeight+"px";t!==e("body").style.height&&(e("body").style.height=t)}var d=n(379),c=n.n(d),s=n(569);c()(s.Z,{insert:"head",singleton:!1}),s.Z.locals,function(){window.MESSAGE_ID=0,window.USER_LOCATION=null;const n={username:"user",icon:r()},i={username:"grandpy",icon:"ðŸ¤–"},d=document.querySelector.bind(document);let c=0;window.addEventListener("orientationchange",a),window.addEventListener("resize",a),window.addEventListener("load",(()=>{e("GET","/grandpy/starter/",null,(e=>{setTimeout((()=>t(e,i)),0)})),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{window.USER_LOCATION={latitude:e.coords.latitude,longitude:e.coords.longitude}}),(e=>{window.USER_LOCATION=null,console.error(`Erreur code ${e.code}: ${e.message}`)})):window.USER_LOCATION=null})),d("#submit_button").addEventListener("click",(r=>{const a=d("#input_area").value;if(!a.trim())return r.preventDefault();const c=function(e){let t={};return/heure/gim.test(e)&&(t.timezone=(new Date).getTimezoneOffset()/-60),/temps/gim.test(e)&&(t.location=USER_LOCATION),JSON.stringify({user_message:e,options:t})}(a);t(a,n),e("POST","/grandpy/chat/",c,(e=>{const{answer:n,oc_anecdote:r,oc_coordinates:o}=JSON.parse(e);t(n,i),r&&o&&(async function(e,n,i=1){const r=document.querySelector.bind(document),o=e,a={animationDuration:i},d=await t('<div class="map"></div>',n,a);!function(){const e=new google.maps.Map(r(`#message${d} .map`),{center:o,zoom:19,gestureHandling:"cooperative"});new google.maps.Marker({position:o,map:e})}()}(o,i),setTimeout((()=>t(r,i)),4500))})),d("#input_area").value="",o(),r.preventDefault()})),d("#input_area").addEventListener("input",o),d("#input_area").addEventListener("keyup",(e=>{const t=e.code,n=!d("#input_area").value.trim();"Enter"===t&&(n||d("#submit_button").click())})),d("#brand_logo").addEventListener("click",(n=>{const r=JSON.stringify({reactions:"n"+c});e("POST","/grandpy/wtf/",r,(e=>t(e,i))),c++,n.preventDefault()}))}()})()})();